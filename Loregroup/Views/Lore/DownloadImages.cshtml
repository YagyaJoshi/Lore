@model Loregroup.Core.ViewModels.OrderViewModel
@using Loregroup.Core.ViewModels

@{
    var frontmodel = (FrontendLayoutModel)ViewBag.FrontLayoutModel;
}

@{
    ViewBag.Title = "OrderHistory";
    Layout = "~/Views/Shared/_MasterFrontend.cshtml";
}

<h2>Download Images</h2>
<!DOCTYPE html>



@if (frontmodel.UserId > 0)
{
    <!-- breadcrumb -->
    <div class="container">
        <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
            <a href="index.html" class="stext-109 cl8 hov-cl1 trans-04">
                Home
                <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
            </a>

            <span class="stext-109 cl4">
                Orders
            </span>
        </div>
    </div>

    <div class="container">
        <div class="row bg0 p-t-30 p-b-85">
            <div class="nav_col">
                <div class="h-100 nav_side_box nav_list">
                    <div class="nav-side-container">
                        <ul class="nav_side">
                            <li>
                                <a href="@Url.Action("DashBoard", "Lore")">
                                    <span class="icon-dashboard"></span>
                                    <span class="text">Dashboard</span>
                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("AccountDetails","Lore")">
                                    <span class="icon-user"></span>
                                    <span class="text">Account Details</span>
                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("Addresses","Lore")">
                                    <span class="icon-map-marker"></span>
                                    <span class="text">Addresses</span>
                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("OrderHistory","Lore")">
                                    <span class="icon-shopping-cart"></span>
                                    <span class="text">Order History</span>
                                </a>
                            </li>
                            <li class="activet">
                                <a href="@Url.Action("DownloadImages","Lore")">
                                    <span class="icon-shopping-cart"></span>
                                    <span class="text">Download Order Images</span>
                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("SignOut", "Lore")">
                                    <span class="icon-signout"></span>
                                    <span class="text">Logout</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col_right m-l-15">
                <div class="nav_side_box p-tb-15 p-lr-30">
                    <h1 class="box_h1">My Account</h1>
                </div>

                @*@using (Html.BeginForm("DownloadAllImages", "Lore", FormMethod.Post))
                    {*@
                @*@using (Html.BeginForm("DownloadImages", "Lore", FormMethod.Post))
                    {*@


                <div class="row">
                    <div class="container-fluid">
                        <div class="div_a w-100 m-t-30 m-l-15 " style="text-align:start; ">
                            <a id="cancelUrl" href="@Html.AttributeEncode(Url.Action("DownloadFiles", "Lore"))"><button type="submit" id="" class="btn btn-primary" style="background-color: #1d1d26;border: none;">AllDownload</button></a>
                        </div>
                    </div>
                </div>
                <div class="__download__image__section">
                    <div class="row">

                        @foreach (var item in Model.ProductImageList)
                        {
                            <div class="col-lg-4 col-sm-4 col-md-4 m-b-20">
                                    <div class="w-100 p-3">
                                <div class="ecommerce-gallery" data-mdb-zoom-effect="true" data-mdb-auto-height="true">
                                    <div class="row py-3 shadow-5">

                                        <a href=@item.ImagePath target="_blank">

                                            <div class="col-6 mt-1">

                                                <img src=@item.ImagePath class="w-100" />

                                            </div>


                                        </a>

                                        <a href=@item.ImagePath11 target="_blank">

                                            <div class="col-5 mt-1">

                                                <img src=@item.ImagePath11 class="w-100" />

                                            </div>


                                        </a>

                                            <a href=@item.ImagePath12 target="_blank">

                                                <div class="col-6 mt-1">

                                                    <img src=@item.ImagePath12 class="w-100" />

                                                </div>


                                            </a>
                                            </div>
                                       



                                    </div>
                                    </div>
                                <div class="div_a w-100 m-t-5" style="text-align:left;">

                                    <a href="@Url.Action("Actionby", "Lore", new { ProductId = item.ProductId })" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2">

                                        <button type="submit" id="" class="btn btn-primary" style="background-color: #1d1d26;border: none;">Download</button>
                                    </a>
                                </div>
                            </div>


                        }



                    </div>

                </div>



            </div>



        </div>
    </div>


}
else
{
    <div>
        <div style="margin:30px 0;">
            <div class="success-circle">
                <i class="fa fa-user" aria-hidden="true"></i>
            </div>
        </div>
        <center> <h1> You have not Logged - In.</h1> </center>
    </div>
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
@{
    if (TempData["ResponseMsg12"] != null)
    {
        <script type="text/javascript">
        alert(@Html.Raw(Json.Encode(TempData["ResponseMsg12"])));
        </script>
    }
}
<script type="text/javascript">
    function downloadFiles() {
        debugger;
        var ajax = new XMLHttpRequest();
        ajax.open("Post", "Lore/DownloadFiles", true);
        ajax.responseType = "blob";
        ajax.onreadystatechange = function () {
            if (this.readyState == 4) {
                debugger;
                var blob = new Blob([this.response], { type: "application/octet-stream" });
                var fileName = "LoreZip.zip";
                saveAs(blob, fileName);

            }
        };
        ajax.send(null);
    }
</script>

<script type="text/javascript">
    function Actionby() {
        debugger;
        var ajax = new XMLHttpRequest();
        ajax.open("Post", "Lore/Actionby", true);
        ajax.responseType = "blob";
        ajax.onreadystatechange = function () {
            if (this.readyState == 4) {
                debugger;
                var blob = new Blob([this.response], { type: "application/octet-stream" });
                var fileName = "LoreZip.zip";
                saveAs(blob, fileName);

            }
        };
        ajax.send(null);
    }
</script>
@*<script>
        $(document).ready(function () {
            $("#btn").click(function (e) {
                debugger;

                var values = $('#abcd').val();


                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("Actionby", "Lore")',
                    data: JSON.stringify({ Name: values }),
                    contentType: 'application/json',
                    success: function (result) {

                    },
                    error: function (err, result) {
                        alert("Error in delete" + err.responseText);
                    }
                });

                return false;
            });
        });
    </script>*@
<script>
    $(".js-select2").each(function () {
        $(this).select2({
            minimumResultsForSearch: 20,
            dropdownParent: $(this).next('.dropDownSelect2')
        });
    })
</script>
<!--===============================================================================================-->
<script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
<script>
    $('.js-pscroll').each(function () {
        $(this).css('position', 'relative');
        $(this).css('overflow', 'hidden');
        var ps = new PerfectScrollbar(this, {
            wheelSpeed: 1,
            scrollingThreshold: 1000,
            wheelPropagation: false,
        });

        $(window).on('resize', function () {
            ps.update();
        })
    });
</script>
<!--===============================================================================================-->
<script src="js/main.js"></script>
<script>

    $('.nav_side li').click(function () {

        $(this).addClass('activet')
            .siblings()
            .removeClass('activet');

    });
</script>
